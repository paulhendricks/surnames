library(dplyr)
source('~/.active-rstudio-document', echo=TRUE)
library(ggplot2)
surnames <- read.csv("./data/surnames.csv", stringsAsFactors = FALSE)
surnames
head(surnames)
surnames <- read.csv("./data/surnames.csv", stringsAsFactors = FALSE,
header = TRUE)
head(surnames)
surnames <- read.csv("./data/surnames.csv", stringsAsFactors = FALSE,
header = TRUE)
head(surnames)
str(surnames)
?read.csv
surnames <- read.csv("./data/surnames.csv", stringsAsFactors = FALSE,
header = TRUE, skip = 1)
head(surnames)
str(surnames)
surnames$name
library(stringr)
?str_sub
str_sub("hello", start = 1L, end = 2L)
str_sub("hello", start = 1L, end = 1LL)
str_sub("hello", start = 1L, end = 1L)
surnames$first_letter <- str_sub(surnames$name, start = 1L, end = 1L)
head(surnames)
surnames %>%
group_by()
surnames %>%
group_by(first_letter) %>%
sum(count = sum(count))
surnames %>%
group_by(first_letter) %>%
sum(count = sum(count))
count
surnames %>%
group_by(first_letter) %>%
sum(total = sum(count))
total
surnames$total <- surnames$count
surnames %>%
group_by(first_letter) %>%
sum(total = sum(total))
surnames <- read.csv("./data/surnames.csv", stringsAsFactors = FALSE,
header = TRUE, skip = 1)
head(surnames)
str(surnames)
surnames$first_letter <- str_sub(surnames$name, start = 1L, end = 1L)
surnames$total <- surnames$count
surnames %>%
group_by(first_letter) %>%
sum(total = sum(total))
head(surnames)
surnames %>%
group_by(first_letter) %>%
sum(total = sum(total))
surnames %>%
group_by(first_letter)
surnames %>%
group_by(first_letter) %>%
summarise(total = sum(total))
surnames %>%
group_by(first_letter) %>%
summarise(count = sum(total))
surnames %>%
group_by(first_letter) %>%
summarise(count = sum(count))
surnames <- read.csv("./data/surnames.csv", stringsAsFactors = FALSE,
header = TRUE, skip = 1)
head(surnames)
str(surnames)
surnames$first_letter <- str_sub(surnames$name, start = 1L, end = 1L)
surnames %>%
group_by(first_letter) %>%
summarise(count = sum(count))
agg <- surnames %>%
group_by(first_letter) %>%
summarise(count = sum(count))
agg
agg <- surnames %>%
group_by(first_letter) %>%
summarise(count = sum(count)) %>%
ungroup()
agg
agg <- surnames %>%
group_by(first_letter) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
data.frame()
agg
letters
toupper(letters)
grid <- data.frame(letter = toupper(letters))
grid
agg <- merge(grid, agg, all.x = TRUE)
agg
agg <- surnames %>%
group_by(letter) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
data.frame
grid <- data.frame(letter = toupper(letters))
agg
grid
agg <- surnames %>%
group_by(letter) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
data.frame
surnames <- read.csv("./data/surnames.csv", stringsAsFactors = FALSE,
header = TRUE, skip = 1)
head(surnames)
str(surnames)
surnames$letter <- str_sub(surnames$name, start = 1L, end = 1L)
agg <- surnames %>%
group_by(letter) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
data.frame
agg
agg <- merge(grid, agg, all.x = TRUE, by = "letter")
agg
agg$count[is.na(agg$count)] <- 0
agg
ggplot(agg, aes(x = letter, y = count)) +
geom_bar(stat = 'identity')
L
library(dplyr)
library(ggplot2)
library(stringr)
surnames <- read.csv("./data/surnames.csv", stringsAsFactors = FALSE,
header = TRUE, skip = 1)
head(surnames)
str(surnames)
surnames$letter <- str_sub(surnames$name, start = 1L, end = 1L)
agg <- surnames %>%
group_by(letter) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
data.frame
L <- toupper(letters)
grid <- data.frame(letter = L)
agg <- merge(grid, agg, all.x = TRUE, by = "letter")
agg$count[is.na(agg$count)] <- 0
agg
L[1:14]
length(L[1:14])
length(L[1:13])
rep(c(0, 1), 13)
sort(rep(c(0, 1), 13))
agg$first <- sort(rep(c(0, 1), 13))
agg
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
data.frame %>%
ggplot(aes(x = first, y = count)) +
geom_bar(stat = 'identity')
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
data.frame %>%
ggplot(aes(x = first, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("First half of alphabet") +
scale_y_continuous("Frequency") +
ggtitle("") +
theme_bw()
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
muatate(first = factor(first))
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
mutate(first = factor(first))
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
mutate(first = factor(first)) %>%
data.frame %>%
ggplot(aes(x = first, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("First half of alphabet") +
scale_y_continuous("Frequency", ) +
ggtitle("") +
theme_bw()
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
mutate(first = factor(first)) %>%
data.frame %>%
ggplot(aes(x = first, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("First half of alphabet") +
scale_y_continuous("Frequency", label = comma) +
ggtitle("") +
theme_bw()
library(scales)
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
mutate(first = factor(first)) %>%
data.frame %>%
ggplot(aes(x = first, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("First half of alphabet") +
scale_y_continuous("Frequency", label = comma) +
ggtitle("") +
theme_bw()
letters[1:13]
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
mutate(first = ifelse(first == 0, "A-M", "N-Z")) %>%
data.frame %>%
ggplot(aes(x = first, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("First half of alphabet") +
scale_y_continuous("Frequency", label = comma) +
ggtitle("") +
theme_bw()
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
mutate(first = ifelse(first == 0, "A - M", "N - Z")) %>%
data.frame %>%
ggplot(aes(x = first, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("First half of alphabet") +
scale_y_continuous("Frequency", label = comma) +
ggtitle("") +
theme_bw()
ggplot(agg, aes(x = letter, y = count)) +
geom_bar(stat = 'identity')
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
mutate(first = ifelse(first == 0, "A - M", "N - Z")) %>%
data.frame %>%
ggplot(aes(x = first, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("Letter") +
scale_y_continuous("Frequency", label = comma) +
ggtitle("") +
theme_bw()
ggplot(agg, aes(x = letter, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("Letter") +
scale_y_continuous("Frequency", label = comma) +
ggtitle("") +
theme_bw()
library(dplyr)
library(ggplot2)
library(stringr)
library(scales)
# http://www.census.gov/topics/population/genealogy/data/2000_surnames.html
surnames <- read.csv("./data/surnames.csv", stringsAsFactors = FALSE,
header = TRUE, skip = 1)
head(surnames)
str(surnames)
surnames$letter <- str_sub(surnames$name, start = 1L, end = 1L)
agg <- surnames %>%
group_by(letter) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
data.frame
L <- toupper(letters)
grid <- data.frame(letter = L)
agg <- merge(grid, agg, all.x = TRUE, by = "letter")
agg$count[is.na(agg$count)] <- 0
agg$first <- sort(rep(c(0, 1), 13))
ggplot(agg, aes(x = letter, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("Letter") +
scale_y_continuous("Frequency", label = comma) +
ggtitle("") +
theme_bw()
ggsave("letter.png")
agg %>%
group_by(first) %>%
summarise(count = sum(count)) %>%
ungroup() %>%
mutate(first = ifelse(first == 0, "A - M", "N - Z")) %>%
data.frame %>%
ggplot(aes(x = first, y = count)) +
geom_bar(stat = 'identity') +
scale_x_discrete("Letter") +
scale_y_continuous("Frequency", label = comma) +
ggtitle("") +
theme_bw()
ggsave("first_or_last.png")
